(self.webpackChunkcom_trackingsystem=self.webpackChunkcom_trackingsystem||[]).push([[1983],{1983:(t,n,o)=>{"use strict";o.r(n),o.d(n,{ViewproductsPageModule:()=>Z});var e=o(8583),r=o(665),i=o(5214),c=o(6476),a=o(4762),u=o(3018),d=o(8002),s=o(6738),l=o(1841),g=o(7810),p=o(1562);const h=["productbtn"],m=function(){return{category:"Milktea"}},f=function(){return{category:"Fruit tea"}},P=function(){return{category:"Slushee"}};function C(t,n){if(1&t){const t=u.EpF();u.TgZ(0,"div",11,12),u.NdJ("mouseleave",function(){return u.CHM(t),u.oxw().dropdown=!1}),u.TgZ(2,"ion-item",13),u.NdJ("click",function(){return u.CHM(t),u.oxw().dropdown=!1}),u._uU(3," All "),u.qZA(),u.TgZ(4,"ion-item",14),u.NdJ("click",function(){return u.CHM(t),u.oxw().dropdown=!1}),u._uU(5," Milktea "),u.qZA(),u.TgZ(6,"ion-item",14),u.NdJ("click",function(){return u.CHM(t),u.oxw().dropdown=!1}),u._uU(7," Fruit Tea "),u.qZA(),u.TgZ(8,"ion-item",14),u.NdJ("click",function(){return u.CHM(t),u.oxw().dropdown=!1}),u._uU(9," Slushee "),u.qZA(),u.qZA()}2&t&&(u.xp6(4),u.Q6J("queryParams",u.DdM(3,m)),u.xp6(2),u.Q6J("queryParams",u.DdM(4,f)),u.xp6(2),u.Q6J("queryParams",u.DdM(5,P)))}function b(t,n){if(1&t&&(u.TgZ(0,"span",17),u._uU(1),u.ALo(2,"currency"),u.qZA()),2&t){const t=u.oxw().$implicit;u.xp6(1),u.hij(" ",u.xi3(2,1,t.UnitPrice,"\u20b1"),"")}}function M(t,n){if(1&t&&(u.TgZ(0,"span",17),u._uU(1),u.ALo(2,"currency"),u.qZA()),2&t){const t=u.oxw().$implicit;u.xp6(1),u.hij("(MD) : ",u.xi3(2,1,t.MediumPrice,"\u20b1"),"")}}function _(t,n){if(1&t&&(u.TgZ(0,"span",17),u._uU(1),u.ALo(2,"currency"),u.qZA()),2&t){const t=u.oxw().$implicit;u.xp6(1),u.hij("(LG) : ",u.xi3(2,1,t.LargePrice,"\u20b1"),"")}}function w(t,n){if(1&t){const t=u.EpF();u.TgZ(0,"ion-item",15),u.NdJ("click",function(){const n=u.CHM(t).$implicit;return u.oxw().clickProducts(n)}),u.TgZ(1,"ion-thumbnail",1),u._UZ(2,"img",16),u.qZA(),u.TgZ(3,"ion-label",17),u.TgZ(4,"h2",17),u._uU(5),u.qZA(),u.YNc(6,b,3,4,"span",18),u.YNc(7,M,3,4,"span",18),u._UZ(8,"br"),u.YNc(9,_,3,4,"span",18),u.qZA(),u.qZA()}if(2&t){const t=n.$implicit;u.xp6(2),u.s9C("src",t.ImageUrl,u.LSH),u.xp6(3),u.hij(" ",t.ProductName," "),u.xp6(1),u.Q6J("ngIf","Slushee"==t.Category),u.xp6(1),u.Q6J("ngIf","Slushee"!=t.Category),u.xp6(2),u.Q6J("ngIf","Slushee"!=t.Category)}}const y=[{path:"",component:(()=>{class t{constructor(t,n,o,e,r,i,c){this.http=t,this.loadingCtrl=n,this.alertCtrl=o,this.afstore=e,this.afauth=r,this.router=i,this.actRoute=c,this.products=[],this.dropdown=!1,this.afauth.authState.subscribe(t=>{t&&t.uid&&this.actRoute.queryParams.subscribe(t=>{this.productReference=null==t.category?this.afstore.collection("Products"):this.afstore.collection("Products",n=>n.where("Category","==",t.category)),this.sub=this.productReference.snapshotChanges().pipe((0,d.U)(t=>t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())))).subscribe(t=>{t=(t=t.filter(t=>t.Stock>0)).sort(function(t,n){return t.ProductName<n.ProductName?-1:t.ProductName>n.ProductName?1:0}),this.products=t})})})}ngOnInit(){}DeleteProduct(t){this.alertCtrl.create({message:"Are you sure you want to delete this product?",buttons:[{text:"Yes",handler:()=>(0,a.mG)(this,void 0,void 0,function*(){var n=s(new Date).format("DD-MM-YYYY hh:mm A");yield this.afstore.collection("Inventory").add({Datetime:n,Category:t.Category,ProductName:t.ProductName,Quantity:-1*parseInt(t.Stock),ImageUrl:t.ImageUrl,DatetimeToSort:new Date,ProductId:t.id,Destination:"Admin"}),this.afstore.doc(`Products/${t.id}`).delete()})},{text:"No",role:"cancel"}]}).then(t=>{t.present()})}EditProduct(t){this.router.navigateByUrl(`/editproduct/${t.id}`)}hideDropdown(t){const n=t.clientX,o=t.clientY,e=this.productbtn.nativeElement.getBoundingClientRect();(n<e.left+2||n>e.right-2||o<e.top+2)&&(this.dropdown=!1)}clickProducts(t){return(0,a.mG)(this,void 0,void 0,function*(){var n=yield this.alertCtrl.create({header:"Choose what you want to do to this product",inputs:[{type:"radio",name:"Edit",value:"Edit",label:"Edit"},{type:"radio",name:"Delete",value:"Delete",label:"Delete"}],buttons:[{text:"Go",handler:n=>{"Edit"==n?this.EditProduct(t):this.DeleteProduct(t)}},{text:"Close",role:"Cancel"}]});yield n.present()})}}return t.\u0275fac=function(n){return new(n||t)(u.Y36(l.eN),u.Y36(i.HT),u.Y36(i.Br),u.Y36(g.ST),u.Y36(p.zQ),u.Y36(c.F0),u.Y36(c.gz))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-viewproducts"]],viewQuery:function(t,n){if(1&t&&u.Gf(h,5,u.SBq),2&t){let t;u.iGM(t=u.CRH())&&(n.productbtn=t.first)}},inputs:{title:"title"},decls:20,vars:3,consts:[[1,"toolbar"],["slot","start"],["name","arrow-back-outline","slot","icon-only","routerLink","/adminpage/atab1",2,"cursor","pointer"],["slot","end"],["fill","clear","color","dark","routerDirection","root","routerLinkActive","active-item",1,"dropdown-btn",3,"mouseenter","mouseleave"],["productbtn",""],["slot","end",3,"name"],["class","dropdown",3,"mouseleave",4,"ngIf"],[1,"container"],[1,"bg-transparent"],["color","none","lines","none","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[1,"dropdown",3,"mouseleave"],["dropdownbox",""],["button","","routerLink","/viewproducts","lines","none","routerDirection","root",3,"click"],["button","","routerLink","/viewproducts","lines","none","routerDirection","root",3,"queryParams","click"],["color","none","lines","none",2,"cursor","pointer",3,"click"],[3,"src"],[2,"font-weight","1000","color","white"],["style","font-weight: 1000; color: white;",4,"ngIf"]],template:function(t,n){1&t&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar",0),u.TgZ(2,"ion-buttons",1),u._UZ(3,"ion-icon",2),u.qZA(),u.TgZ(4,"ion-title"),u._uU(5,"View Products"),u.qZA(),u.TgZ(6,"ion-buttons",3),u.TgZ(7,"ion-button",4,5),u.NdJ("mouseenter",function(){return n.dropdown=!0})("mouseleave",function(t){return n.hideDropdown(t)}),u.TgZ(9,"ion-title"),u._uU(10,"Categories"),u.qZA(),u._UZ(11,"ion-icon",6),u.qZA(),u.qZA(),u.qZA(),u.YNc(12,C,10,6,"div",7),u.qZA(),u.TgZ(13,"ion-content"),u.TgZ(14,"div",8),u.TgZ(15,"ion-grid"),u.TgZ(16,"ion-row"),u.TgZ(17,"ion-col"),u.TgZ(18,"ion-list",9),u.YNc(19,w,10,5,"ion-item",10),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(11),u.Q6J("name",n.dropdown?"chevron-down":"chevron-up"),u.xp6(1),u.Q6J("ngIf",n.dropdown),u.xp6(7),u.Q6J("ngForOf",n.products))},directives:[i.Gu,i.sr,i.Sm,i.gu,i.YI,c.rH,i.wd,i.YG,c.Od,e.O5,i.W2,i.jY,i.Nd,i.wI,i.q_,e.sg,i.Ie,i.Bs,i.Q$],pipes:[e.H9],styles:[".toolbar[_ngcontent-%COMP%]{height:84px;--background:#69a03a;color:#fff;font-size:20px;line-height:84px}ion-item[_ngcontent-%COMP%]:hover{background-color:#000}ion-item[_ngcontent-%COMP%]:active{background-color:#c31111}ion-content[_ngcontent-%COMP%]{--background:url(backgroundimage2.2480a2c01d0396aec9a7.jpg) no-repeat center center/cover;background:linear-gradient(120deg,#2980b9,#8e44ad)}.bg-transparent[_ngcontent-%COMP%]{background:#0000}.container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{width:100px!important;height:100px!important}.container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.container[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{color:#000}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]{margin-top:1px}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{font-weight:600;padding:5px;margin-right:20px;cursor:pointer}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{margin-left:20px;font-weight:600;padding:5px;cursor:pointer}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:active{background-color:#69a03a}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]:active{background-color:red}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;background-color:#69a03a}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]:active{background-color:#051542}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn2[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;background-color:#c31111}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn2[_ngcontent-%COMP%]:active{background-color:#990404}.container[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:10px;color:#69a03a}@media (min-width: 768px){.mobile-header[_ngcontent-%COMP%]{display:none}.header[_ngcontent-%COMP%]{display:flex;background:#92949c;padding-left:40px;padding-right:40px}}@media (max-width: 768px){.mobile-header[_ngcontent-%COMP%]{display:block}.header[_ngcontent-%COMP%]{display:none}}.active-item[_ngcontent-%COMP%]{border-bottom:2px solid var(--ion-color-dark)}ion-back-button[_ngcontent-%COMP%]{display:block}"]}),t})()}];let x=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[c.Bz.forChild(y)],c.Bz]}),t})(),Z=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[e.ez,r.u5,i.Pc,x]]}),t})()}}]);