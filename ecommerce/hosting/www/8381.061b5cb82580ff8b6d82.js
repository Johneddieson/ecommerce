(self.webpackChunkcom_trackingsystem=self.webpackChunkcom_trackingsystem||[]).push([[8381],{8381:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Tab2PageModule:()=>b});var n=i(5214),o=i(8583),s=i(665),a=i(581),r=i(6476),c=i(8002),l=i(3018),u=i(7810),d=i(1562),g=i(3388);function f(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"ion-item",10),l.NdJ("click",function(){l.CHM(t);const e=l.oxw().$implicit;return l.oxw().update(e)}),l.TgZ(1,"p"),l._uU(2,"Mark as read"),l.qZA(),l.qZA()}}function h(t,e){if(1&t&&(l.TgZ(0,"ion-card",2),l.TgZ(1,"ion-card-header",3),l.TgZ(2,"ion-card-subtitle",4),l._uU(3),l.qZA(),l.TgZ(4,"ion-item",5),l.TgZ(5,"ion-label",6),l._uU(6),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"ion-card-content",7),l.TgZ(8,"ion-label",8),l._uU(9),l.qZA(),l.qZA(),l.TgZ(10,"ion-row"),l.YNc(11,f,3,0,"ion-item",9),l.qZA(),l.qZA()),2&t){const t=e.$implicit;l.xp6(3),l.hij(" Remarks: ",t.remarks," "),l.xp6(3),l.Oqu(t.Message),l.xp6(3),l.hij("Due ",t.Datetime,""),l.xp6(2),l.Q6J("ngIf",!t.read)}}const m=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o,s,a){this.router=t,this.afstore=e,this.afauth=i,this.loadingCtrl=n,this.locationStrategy=o,this.auth=s,this.alertCtrl=a,this.notificationsList=[],this.notifCounts=0,this.afauth.authState.subscribe(t=>{t&&t.uid&&(this.myid=t.uid,this.notificationsReference=this.afstore.collection(`users/${t.uid}/notifications`),this.sub=this.notificationsReference.snapshotChanges().pipe((0,c.U)(t=>t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())))).subscribe(t=>{t=(t=t.map((t,e)=>Object.assign({id:t.id,Datetime:t.Datetime,DatetimeToSort:t.DatetimeToSort,read:t.read,remarks:t.remarks,Message:t.Message}))).sort((t,e)=>Number(e.DatetimeToSort)-Number(t.DatetimeToSort)),this.notificationsList=t,console.log("wewewew",this.notificationsList);var e=t.filter(t=>1!=t.read);this.notifCounts=e.length,console.log("count",this.notifCounts)}))})}ngOnInit(){}update(t){console.log("edited",this.myid),this.afstore.doc(`users/${this.myid}/notifications/${t.id}`).update({read:!0})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(r.F0),l.Y36(u.ST),l.Y36(d.zQ),l.Y36(n.HT),l.Y36(o.S$),l.Y36(g.u),l.Y36(n.Br))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-tab2"]],decls:2,vars:2,consts:[[3,"fullscreen"],["class","ion-margin",4,"ngFor","ngForOf"],[1,"ion-margin"],[1,"ion-header"],[1,"ion-subtitle",2,"font-weight","bolder","color","black"],["color","none","lines","none"],["text-wrap","",1,"label",2,"font-weight","bolder","color","black"],[2,"font-weight","bolder"],[2,"font-weight","bolder","color","black"],["button","",3,"click",4,"ngIf"],["button","",3,"click"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-content",0),l.YNc(1,h,12,4,"ion-card",1),l.qZA()),2&t&&(l.Q6J("fullscreen",!0),l.xp6(1),l.Q6J("ngForOf",e.notificationsList))},directives:[n.W2,o.sg,n.PM,n.Zi,n.tO,n.Ie,n.Q$,n.FN,n.Nd,o.O5],styles:["ion-content[_ngcontent-%COMP%]{--background:url(backgroundimage.35be21de00795f69fb68.jpg) no-repeat center center/cover;background:linear-gradient(120deg,#2980b9,#8e44ad)}.ion-header[_ngcontent-%COMP%], .ion-margin[_ngcontent-%COMP%], .ion-subtitle[_ngcontent-%COMP%], .label[_ngcontent-%COMP%]{background-color:initial}"]}),t})()}];let p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[r.Bz.forChild(m)],r.Bz]}),t})(),b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[n.Pc,o.ez,s.u5,a.e,p]]}),t})()}}]);