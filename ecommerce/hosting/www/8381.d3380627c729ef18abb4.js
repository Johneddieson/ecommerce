(self.webpackChunkcom_trackingsystem=self.webpackChunkcom_trackingsystem||[]).push([[8381],{8381:(t,i,e)=>{"use strict";e.r(i),e.d(i,{Tab2PageModule:()=>Z});var n=e(5214),o=e(8583),s=e(665),a=e(581),c=e(6476),r=e(8002),u=e(3018),l=e(7810),d=e(1562),f=e(3388);function g(t,i){if(1&t){const t=u.EpF();u.TgZ(0,"ion-item",8),u.NdJ("click",function(){u.CHM(t);const i=u.oxw().$implicit;return u.oxw().update(i)}),u.TgZ(1,"p"),u._uU(2,"Mark as read"),u.qZA(),u.qZA()}}function m(t,i){if(1&t&&(u.TgZ(0,"ion-card",5),u.TgZ(1,"ion-card-header"),u.TgZ(2,"ion-card-subtitle"),u._uU(3),u.qZA(),u.TgZ(4,"ion-item"),u.TgZ(5,"ion-label",6),u._uU(6),u.qZA(),u.qZA(),u.qZA(),u.TgZ(7,"ion-card-content"),u.TgZ(8,"ion-label"),u._uU(9),u.qZA(),u.qZA(),u.TgZ(10,"ion-row"),u.YNc(11,g,3,0,"ion-item",7),u.qZA(),u.qZA()),2&t){const t=i.$implicit;u.xp6(3),u.hij(" Remarks: ",t.remarks," "),u.xp6(3),u.Oqu(t.Message),u.xp6(3),u.hij("Due ",t.Datetime,""),u.xp6(2),u.Q6J("ngIf",!t.read)}}const h=[{path:"",component:(()=>{class t{constructor(t,i,e,n,o,s,a){this.router=t,this.afstore=i,this.afauth=e,this.loadingCtrl=n,this.locationStrategy=o,this.auth=s,this.alertCtrl=a,this.notificationsList=[],this.notifCounts=0,this.afauth.authState.subscribe(i=>{i&&i.uid&&(this.myid=i.uid,t.navigateByUrl("admin"==i.displayName?"adminpage":"tabs"),this.notificationsReference=this.afstore.collection(`users/${i.uid}/notifications`),this.sub=this.notificationsReference.snapshotChanges().pipe((0,r.U)(t=>t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())))).subscribe(t=>{t=(t=t.map((t,i)=>Object.assign({id:t.id,Datetime:t.Datetime,DatetimeToSort:t.DatetimeToSort,read:t.read,remarks:t.remarks,Message:t.Message}))).sort((t,i)=>Number(i.DatetimeToSort)-Number(t.DatetimeToSort)),this.notificationsList=t,console.log("wewewew",this.notificationsList);var i=t.filter(t=>1!=t.read);this.notifCounts=i.length,console.log("count",this.notifCounts)}))})}ngOnInit(){}update(t){console.log("edited",this.myid),this.afstore.doc(`users/${this.myid}/notifications/${t.id}`).update({read:!0})}}return t.\u0275fac=function(i){return new(i||t)(u.Y36(c.F0),u.Y36(l.ST),u.Y36(d.zQ),u.Y36(n.HT),u.Y36(o.S$),u.Y36(f.u),u.Y36(n.Br))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-tab2"]],decls:7,vars:3,consts:[[3,"translucent"],["lines","none"],[2,"font-weight","800","font-size","3em"],[3,"fullscreen"],["class","ion-margin",4,"ngFor","ngForOf"],[1,"ion-margin"],["text-wrap",""],["button","",3,"click",4,"ngIf"],["button","",3,"click"]],template:function(t,i){1&t&&(u.TgZ(0,"ion-header",0),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-item",1),u.TgZ(3,"ion-label",2),u._uU(4," Notifications "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(5,"ion-content",3),u.YNc(6,m,12,4,"ion-card",4),u.qZA()),2&t&&(u.Q6J("translucent",!0),u.xp6(5),u.Q6J("fullscreen",!0),u.xp6(1),u.Q6J("ngForOf",i.notificationsList))},directives:[n.Gu,n.sr,n.Ie,n.Q$,n.W2,o.sg,n.PM,n.Zi,n.tO,n.FN,n.Nd,o.O5],styles:["ion-content[_ngcontent-%COMP%]{--background:#f0f4fd}ion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300}"]}),t})()}];let p=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[c.Bz.forChild(h)],c.Bz]}),t})(),Z=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[n.Pc,o.ez,s.u5,a.e,p]]}),t})()}}]);