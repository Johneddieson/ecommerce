(self.webpackChunkcom_trackingsystem=self.webpackChunkcom_trackingsystem||[]).push([[7101],{7101:(t,e,n)=>{"use strict";n.r(e),n.d(e,{CreateposPageModule:()=>q});var o=n(8583),r=n(665),i=n(5214),c=n(6476),a=n(4762),s=n(3018),u=n(9765),l=n(8002),d=n(1423),g=n(3388),p=n(7810),m=n(1562);const h=["productbtn"];function f(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"ion-button",12),s.NdJ("click",function(){return s.CHM(t),s.oxw().checkout()}),s.TgZ(1,"ion-badge",13),s._uU(2),s.qZA(),s._uU(3,"Checkout"),s.qZA()}if(2&t){const t=s.oxw();s.xp6(2),s.Oqu(t.numbers)}}const C=function(){return{category:"Milktea"}},b=function(){return{category:"Fruit tea"}},Z=function(){return{category:"Slushee"}};function P(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",14,15),s.NdJ("mouseleave",function(){return s.CHM(t),s.oxw().dropdown=!1}),s.TgZ(2,"ion-item",16),s.NdJ("click",function(){return s.CHM(t),s.oxw().dropdown=!1}),s._uU(3," All "),s.qZA(),s.TgZ(4,"ion-item",17),s.NdJ("click",function(){return s.CHM(t),s.oxw().dropdown=!1}),s._uU(5," Milktea "),s.qZA(),s.TgZ(6,"ion-item",17),s.NdJ("click",function(){return s.CHM(t),s.oxw().dropdown=!1}),s._uU(7," Fruit Tea "),s.qZA(),s.TgZ(8,"ion-item",17),s.NdJ("click",function(){return s.CHM(t),s.oxw().dropdown=!1}),s._uU(9," Slushee "),s.qZA(),s.qZA()}2&t&&(s.xp6(4),s.Q6J("queryParams",s.DdM(3,C)),s.xp6(2),s.Q6J("queryParams",s.DdM(4,b)),s.xp6(2),s.Q6J("queryParams",s.DdM(5,Z)))}function y(t,e){if(1&t&&(s.TgZ(0,"p",25),s._uU(1),s.qZA()),2&t){const t=s.oxw().$implicit;s.xp6(1),s.hij("\u20b1 ",t.UnitPrice,"")}}function M(t,e){if(1&t&&(s.TgZ(0,"p",25),s._uU(1),s.qZA()),2&t){const t=s.oxw().$implicit;s.xp6(1),s.hij("(MD): \u20b1 ",t.MediumPrice,"")}}function k(t,e){if(1&t&&(s.TgZ(0,"p",25),s._uU(1),s.qZA()),2&t){const t=s.oxw().$implicit;s.xp6(1),s.hij("(LG): \u20b1 ",t.LargePrice,"")}}function x(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"ion-item",18),s.TgZ(1,"ion-thumbnail",19),s._UZ(2,"img",20),s.qZA(),s.TgZ(3,"ion-label",21),s.TgZ(4,"h2",22),s._uU(5),s.qZA(),s.TgZ(6,"span",23),s.TgZ(7,"button",24),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().AddtoCart(e)}),s._uU(8," Add"),s.qZA(),s.qZA(),s.TgZ(9,"p",25),s._uU(10),s.qZA(),s.YNc(11,y,2,1,"p",26),s.YNc(12,M,2,1,"p",26),s.YNc(13,k,2,1,"p",26),s.TgZ(14,"div",27),s.TgZ(15,"span",28),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().Decrease(e)}),s._uU(16," - "),s.qZA(),s._uU(17),s.TgZ(18,"span",29),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().Increase(e)}),s._uU(19," + "),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit;s.xp6(2),s.s9C("src",t.ImageUrl,s.LSH),s.xp6(3),s.AsE("",t.ProductName," (",t.Category,") "),s.xp6(5),s.hij(" ",t.Stock," grams remaining stock"),s.xp6(1),s.Q6J("ngIf","Slushee"==t.Category),s.xp6(1),s.Q6J("ngIf","Slushee"!=t.Category),s.xp6(1),s.Q6J("ngIf","Slushee"!=t.Category),s.xp6(4),s.hij(" ",t.Quantity," ")}}const _=[{path:"",component:(()=>{class t{constructor(t,e,n,o,r,i,c,a,s,d){this.msg=t,this.alertCtrl=e,this.auth=n,this.afstore=o,this.afauth=r,this.locationStrategy=i,this.router=c,this.applicationRef=a,this.zone=s,this.actRoute=d,this.numbers=0,this.showLog=!1,this.productList=[],this.getCartDetails=[],this.cartItem=0,this.dropdown=!1,this.unsubscriber=new u.xQ,this.itemsCart=[],c.events.subscribe(()=>{s.run(()=>{setTimeout(()=>{this.applicationRef.tick(),this.loadCart()},0)})}),this.afauth.authState.subscribe(t=>{t&&t.uid&&this.actRoute.queryParams.subscribe(t=>{this.productReference=null==t.category?o.collection("Products"):o.collection("Products",e=>e.where("Category","==",t.category)),this.sub=this.productReference.snapshotChanges().pipe((0,l.U)(t=>t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())))).subscribe(t=>{t=(t=t.filter(t=>t.Stock>0)).sort(function(t,e){return t.ProductName<e.ProductName?-1:t.ProductName>e.ProductName?1:0}),this.productList=t})})})}ngOnInit(){this.router.events.subscribe(()=>{this.zone.run(()=>{setTimeout(()=>{this.applicationRef.tick(),this.loadCart()},0)})});var t=sessionStorage.getItem("cart");console.log(t)}loadCart(){if(null!=sessionStorage.getItem("cart")){var t=[];t.push(JSON.parse(sessionStorage.getItem("cart"))),this.numbers=t[0].length}else this.numbers=0}Increase(t){localStorage.removeItem("cart"),t.Quantity+=1,this.loadCart()}Decrease(t){1==t.Quantity?this.alertCtrl.create({message:"Quantity should not be zero",buttons:[{text:"Ok",role:"cancel"}]}).then(t=>{t.present(),this.loadCart()}):(t.Quantity-=1,this.loadCart())}cartItemFunc(){var t=JSON.parse(sessionStorage.getItem("cart"));this.cartItem=t.length,this.msg.cartSubject.next(this.cartItem)}checkout(){this.router.navigateByUrl("/admincheckout")}hideDropdown(t){const e=t.clientX,n=t.clientY,o=this.productbtn.nativeElement.getBoundingClientRect();(e<o.left+2||e>o.right-2||n<o.top+2)&&(this.dropdown=!1)}AddtoCart(t){return(0,a.mG)(this,void 0,void 0,function*(){if("Slushee"!=t.Category){var e=yield this.alertCtrl.create({header:"Choose Size",inputs:[{type:"radio",label:"Medium",value:"Medium",name:"Medium"},{type:"radio",label:"Large",value:"Large",name:"Large"}],buttons:[{text:"Add to cart",handler:e=>(0,a.mG)(this,void 0,void 0,function*(){var n={Category:t.Category,GramsPerOrder:"Medium"==e?t.MediumGramsPerOrder:t.LargeGramsPerOrder,ImageUrl:t.ImageUrl,LargeGramsPerOrder:t.LargeGramsPerOrder,LargePrice:t.LargePrice,MediumGramsPerOrder:t.MediumGramsPerOrder,MediumPrice:t.MediumPrice,ProductName:"Medium"==e?`${t.ProductName} Medium`:`${t.ProductName} Large`,Quantity:t.Quantity,Stock:t.Stock,UnitPrice:"Medium"==e?t.MediumPrice:t.LargePrice,id:t.id};yield this.addToCartFunction(n),t.Quantity=1})},{text:"Cancel",role:"cancel"}]});yield e.present()}else yield this.addToCartFunction(t)})}addToCartFunction(t){return(0,a.mG)(this,void 0,void 0,function*(){if(null==sessionStorage.getItem("cart")){let e=[];e.push(t),sessionStorage.setItem("cart",JSON.stringify(e))}else{var e=t.id,n=t.ProductName;let o=-1;this.itemsCart=JSON.parse(sessionStorage.getItem("cart"));for(let r=0;r<this.itemsCart.length;r++)if(e==this.itemsCart[r].id&&n==this.itemsCart[r].ProductName){this.itemsCart[r].Quantity=t.Quantity,o=r;break}-1==o?(this.itemsCart.push(t),sessionStorage.setItem("cart",JSON.stringify(this.itemsCart))):sessionStorage.setItem("cart",JSON.stringify(this.itemsCart)),this.cartItemFunc()}this.loadCart(),t.Quantity=1})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(d.g),s.Y36(i.Br),s.Y36(g.u),s.Y36(p.ST),s.Y36(m.zQ),s.Y36(o.S$),s.Y36(c.F0),s.Y36(s.z2F),s.Y36(s.R0b),s.Y36(c.gz))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-createpos"]],viewQuery:function(t,e){if(1&t&&s.Gf(h,5,s.SBq),2&t){let t;s.iGM(t=s.CRH())&&(e.productbtn=t.first)}},inputs:{title:"title"},decls:21,vars:4,consts:[[1,"toolbar"],["slot","start"],["name","arrow-back-outline","slot","icon-only","routerLink","/adminpage/atab1",2,"cursor","pointer"],["slot","end"],["fill","clear","color","dark","routerDirection","root","routerLinkActive","active-item",1,"dropdown-btn",3,"mouseenter","mouseleave"],["productbtn",""],["slot","end",3,"name"],[3,"click",4,"ngIf"],["class","dropdown",3,"mouseleave",4,"ngIf"],[1,"container"],[1,"bg-transparent"],["color","none","lines","none",4,"ngFor","ngForOf"],[3,"click"],["color","danger"],[1,"dropdown",3,"mouseleave"],["dropdownbox",""],["button","","routerLink","/createpos","routerDirection","root","lines","none",3,"click"],["button","","routerLink","/createpos","lines","none","routerDirection","root",3,"queryParams","click"],["color","none","lines","none"],["slot","start",1,"transparent"],[3,"src"],[2,"font-weight","bolder"],[2,"font-weight","1000","color","black"],[2,"float","right"],["id","btn",3,"click"],[1,"rate",2,"font-weight","1000","color","black"],["class","rate","style","font-weight: 1000; color: black;",4,"ngIf"],["id","qty"],[1,"minus",3,"click"],[1,"plus",3,"click"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar",0),s.TgZ(2,"ion-buttons",1),s._UZ(3,"ion-icon",2),s.qZA(),s.TgZ(4,"ion-title"),s._uU(5,"POS"),s.qZA(),s.TgZ(6,"ion-buttons",3),s.TgZ(7,"ion-button",4,5),s.NdJ("mouseenter",function(){return e.dropdown=!0})("mouseleave",function(t){return e.hideDropdown(t)}),s.TgZ(9,"ion-title"),s._uU(10,"Categories"),s.qZA(),s._UZ(11,"ion-icon",6),s.qZA(),s.YNc(12,f,4,1,"ion-button",7),s.qZA(),s.qZA(),s.YNc(13,P,10,6,"div",8),s.qZA(),s.TgZ(14,"ion-content"),s.TgZ(15,"div",9),s.TgZ(16,"ion-grid"),s.TgZ(17,"ion-row"),s.TgZ(18,"ion-col"),s.TgZ(19,"ion-list",10),s.YNc(20,x,20,8,"ion-item",11),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(11),s.Q6J("name",e.dropdown?"chevron-down":"chevron-up"),s.xp6(1),s.Q6J("ngIf",0!=e.numbers),s.xp6(1),s.Q6J("ngIf",e.dropdown),s.xp6(7),s.Q6J("ngForOf",e.productList))},directives:[i.Gu,i.sr,i.Sm,i.gu,i.YI,c.rH,i.wd,i.YG,c.Od,o.O5,i.W2,i.jY,i.Nd,i.wI,i.q_,o.sg,i.yp,i.Ie,i.Bs,i.Q$],styles:[".toolbar[_ngcontent-%COMP%]{height:84px;--background:#69a03a;color:#fff;font-size:20px;line-height:84px}.bg-transparent[_ngcontent-%COMP%]{background:#0000}ion-content[_ngcontent-%COMP%]{--background:url(backgroundimage.35be21de00795f69fb68.jpg) no-repeat center center/cover}ion-thumbnail[_ngcontent-%COMP%]{width:100px!important;height:100px!important}ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.rate[_ngcontent-%COMP%]{color:#ccc}#btn[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;background-color:#69a03a}#btn[_ngcontent-%COMP%]:active{background-color:#051542}#qty[_ngcontent-%COMP%]{margin-top:5px}#qty[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{margin-right:20px}#qty[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%], #qty[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{font-weight:600;padding:5px;cursor:pointer}#qty[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{margin-left:20px}#qty[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:active{background-color:#69a03a}#qty[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]:active{background-color:red}#qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;background-color:#69a03a}#qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]:active{background-color:#051542}ion-label[_ngcontent-%COMP%]{font-size:20px}ion-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:10px;color:#69a03a}ion-back-button[_ngcontent-%COMP%]{display:block}"]}),t})()}];let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[c.Bz.forChild(_)],c.Bz]}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.ez,r.u5,i.Pc,O,r.UX]]}),t})()}}]);