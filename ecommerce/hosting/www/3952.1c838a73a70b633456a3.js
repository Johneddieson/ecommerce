(self.webpackChunkcom_trackingsystem=self.webpackChunkcom_trackingsystem||[]).push([[3952],{3952:(t,e,n)=>{"use strict";n.r(e),n.d(e,{HomePageModule:()=>w});var o=n(8583),r=n(665),i=n(5214),c=n(6476),a=n(4762),s=n(3018),u=n(8002),g=n(9765),d=n(1423),l=n(3388),m=n(7810),p=n(1562);const h=["productbtn"];function f(t,e){if(1&t&&(s.TgZ(0,"ion-buttons",10),s.TgZ(1,"ion-button"),s.TgZ(2,"ion-badge",11),s._uU(3),s.qZA(),s._uU(4,"Checkout"),s.qZA(),s.qZA()),2&t){const t=s.oxw();s.xp6(3),s.Oqu(t.numbers)}}const C=function(){return{category:"Milktea"}},b=function(){return{category:"Fruit tea"}},P=function(){return{category:"Slushee"}};function M(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",12,13),s.NdJ("mouseleave",function(){return s.CHM(t),s.oxw().dropdown=!1}),s.TgZ(2,"ion-item",14),s.NdJ("click",function(){return s.CHM(t),s.oxw().dropdown=!1}),s._uU(3," All "),s.qZA(),s.TgZ(4,"ion-item",15),s.NdJ("click",function(){return s.CHM(t),s.oxw().dropdown=!1}),s._uU(5," Milktea "),s.qZA(),s.TgZ(6,"ion-item",15),s.NdJ("click",function(){return s.CHM(t),s.oxw().dropdown=!1}),s._uU(7," Fruit Tea "),s.qZA(),s.TgZ(8,"ion-item",15),s.NdJ("click",function(){return s.CHM(t),s.oxw().dropdown=!1}),s._uU(9," Slushee "),s.qZA(),s.qZA()}2&t&&(s.xp6(4),s.Q6J("queryParams",s.DdM(3,C)),s.xp6(2),s.Q6J("queryParams",s.DdM(4,b)),s.xp6(2),s.Q6J("queryParams",s.DdM(5,P)))}function Z(t,e){if(1&t&&(s.TgZ(0,"p",22),s._uU(1),s.qZA()),2&t){const t=s.oxw().$implicit;s.xp6(1),s.hij("\u20b1 ",t.UnitPrice,"")}}function y(t,e){if(1&t&&(s.TgZ(0,"p",22),s._uU(1),s.qZA()),2&t){const t=s.oxw().$implicit;s.xp6(1),s.hij("(MD): \u20b1 ",t.MediumPrice,"")}}function O(t,e){if(1&t&&(s.TgZ(0,"p",22),s._uU(1),s.qZA()),2&t){const t=s.oxw().$implicit;s.xp6(1),s.hij("(LG): \u20b1 ",t.LargePrice,"")}}function _(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"ion-item",16),s.TgZ(1,"ion-thumbnail",1),s._UZ(2,"img",17),s.qZA(),s.TgZ(3,"ion-label",18),s.TgZ(4,"h2",19),s._uU(5),s.qZA(),s.TgZ(6,"span",20),s.TgZ(7,"button",21),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().AddtoCart(e)}),s._uU(8," Add"),s.qZA(),s.qZA(),s.TgZ(9,"p",22),s._uU(10),s.qZA(),s.YNc(11,Z,2,1,"p",23),s.YNc(12,y,2,1,"p",23),s.YNc(13,O,2,1,"p",23),s.TgZ(14,"div",24),s.TgZ(15,"span",25),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().Decrease(e)}),s._uU(16," - "),s.qZA(),s._uU(17),s.TgZ(18,"span",26),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().Increase(e)}),s._uU(19," + "),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit;s.xp6(2),s.s9C("src",t.ImageUrl,s.LSH),s.xp6(3),s.AsE(" ",t.ProductName," (",t.Category,") "),s.xp6(5),s.hij(" ",t.Stock," grams remaining stock"),s.xp6(1),s.Q6J("ngIf","Slushee"==t.Category),s.xp6(1),s.Q6J("ngIf","Slushee"!=t.Category),s.xp6(1),s.Q6J("ngIf","Slushee"!=t.Category),s.xp6(4),s.hij(" ",t.Quantity," ")}}const k=[{path:"",component:(()=>{class t{constructor(t,e,n,o,r,i,c,a,s,d){this.msg=t,this.alertCtrl=e,this.auth=n,this.afstore=o,this.afauth=r,this.locationStrategy=i,this.router=c,this.applicationRef=a,this.zone=s,this.actRoute=d,this.numbers=0,this.showLog=!1,this.productList=[],this.getCartDetails=[],this.cartItem=0,this.dropdown=!1,this.unsubscriber=new g.xQ,this.itemsCart=[],c.events.subscribe(()=>{s.run(()=>{setTimeout(()=>{this.applicationRef.tick(),this.loadCart()},0)})}),this.afauth.authState.subscribe(t=>{t&&t.uid&&this.actRoute.queryParams.subscribe(t=>{this.productReference=null==t.category?o.collection("Products"):o.collection("Products",e=>e.where("Category","==",t.category)),this.sub=this.productReference.snapshotChanges().pipe((0,u.U)(t=>t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())))).subscribe(t=>{t=(t=t.filter(t=>t.Stock>0)).sort(function(t,e){return t.ProductName<e.ProductName?-1:t.ProductName>e.ProductName?1:0}),this.productList=t})})})}ngOnInit(){this.router.events.subscribe(()=>{this.zone.run(()=>{setTimeout(()=>{this.applicationRef.tick(),this.loadCart()},0)})});var t=sessionStorage.getItem("cart");console.log(t)}loadCart(){if(null!=sessionStorage.getItem("cart")){var t=[];t.push(JSON.parse(sessionStorage.getItem("cart"))),this.numbers=t[0].length}else this.numbers=0}Increase(t){localStorage.removeItem("cart"),t.Quantity+=1,this.loadCart()}Decrease(t){1==t.Quantity?this.alertCtrl.create({message:"Quantity should not be zero",buttons:[{text:"Ok",role:"cancel"}]}).then(t=>{t.present(),this.loadCart()}):(t.Quantity-=1,this.loadCart())}cartItemFunc(){var t=JSON.parse(sessionStorage.getItem("cart"));this.cartItem=t.length,this.msg.cartSubject.next(this.cartItem)}checkout(){this.router.navigateByUrl("/checkout")}hideDropdown(t){const e=t.clientX,n=t.clientY,o=this.productbtn.nativeElement.getBoundingClientRect();(e<o.left+2||e>o.right-2||n<o.top+2)&&(this.dropdown=!1)}AddtoCart(t){return(0,a.mG)(this,void 0,void 0,function*(){if("Slushee"!=t.Category){var e=yield this.alertCtrl.create({header:"Choose Size",inputs:[{type:"radio",label:"Medium",value:"Medium",name:"Medium"},{type:"radio",label:"Large",value:"Large",name:"Large"}],buttons:[{text:"Add to cart",handler:e=>(0,a.mG)(this,void 0,void 0,function*(){var n={Category:t.Category,GramsPerOrder:"Medium"==e?t.MediumGramsPerOrder:t.LargeGramsPerOrder,ImageUrl:t.ImageUrl,LargeGramsPerOrder:t.LargeGramsPerOrder,LargePrice:t.LargePrice,MediumGramsPerOrder:t.MediumGramsPerOrder,MediumPrice:t.MediumPrice,ProductName:"Medium"==e?`${t.ProductName} Medium`:`${t.ProductName} Large`,Quantity:t.Quantity,Stock:t.Stock,UnitPrice:"Medium"==e?t.MediumPrice:t.LargePrice,id:t.id};yield this.addToCartFunction(n),t.Quantity=1})},{text:"Cancel",role:"cancel"}]});yield e.present()}else yield this.addToCartFunction(t)})}addToCartFunction(t){return(0,a.mG)(this,void 0,void 0,function*(){if(null==sessionStorage.getItem("cart")){let e=[];e.push(t),sessionStorage.setItem("cart",JSON.stringify(e))}else{var e=t.id,n=t.ProductName;let o=-1;this.itemsCart=JSON.parse(sessionStorage.getItem("cart"));for(let r=0;r<this.itemsCart.length;r++)if(e==this.itemsCart[r].id&&n==this.itemsCart[r].ProductName){this.itemsCart[r].Quantity=t.Quantity,o=r;break}-1==o?(this.itemsCart.push(t),sessionStorage.setItem("cart",JSON.stringify(this.itemsCart))):sessionStorage.setItem("cart",JSON.stringify(this.itemsCart)),this.cartItemFunc()}this.loadCart(),t.Quantity=1})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(d.g),s.Y36(i.Br),s.Y36(l.u),s.Y36(m.ST),s.Y36(p.zQ),s.Y36(o.S$),s.Y36(c.F0),s.Y36(s.z2F),s.Y36(s.R0b),s.Y36(c.gz))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-home"]],viewQuery:function(t,e){if(1&t&&s.Gf(h,5,s.SBq),2&t){let t;s.iGM(t=s.CRH())&&(e.productbtn=t.first)}},inputs:{title:"title"},decls:17,vars:4,consts:[[1,"toolbar"],["slot","start"],["fill","clear","color","dark","routerDirection","root","routerLinkActive","active-item",1,"dropdown-btn",3,"mouseenter","mouseleave"],["productbtn",""],["slot","end",3,"name"],["slot","end","routerLink","/tabs/tab3/forcheckout",4,"ngIf"],["class","dropdown",3,"mouseleave",4,"ngIf"],[1,"container"],[1,"bg-transparent"],["class","item-background-color","color","none","lines","none",4,"ngFor","ngForOf"],["slot","end","routerLink","/tabs/tab3/forcheckout"],["color","danger"],[1,"dropdown",3,"mouseleave"],["dropdownbox",""],["button","","routerLink","/tabs/tab1","routerDirection","root","lines","none",3,"click"],["button","","routerLink","/tabs/tab1","lines","none","routerDirection","root",3,"queryParams","click"],["color","none","lines","none",1,"item-background-color"],[3,"src"],[2,"font-weight","bolder"],[2,"font-weight","1000","color","black"],[2,"float","right"],["id","btn",3,"click"],[1,"rate",2,"font-weight","1000","color","black"],["class","rate","style","font-weight: 1000; color: black;",4,"ngIf"],["id","qty"],[1,"minus",3,"click"],[1,"plus",3,"click"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar",0),s.TgZ(2,"ion-buttons",1),s.TgZ(3,"ion-button",2,3),s.NdJ("mouseenter",function(){return e.dropdown=!0})("mouseleave",function(t){return e.hideDropdown(t)}),s.TgZ(5,"ion-title"),s._uU(6,"Categories"),s.qZA(),s._UZ(7,"ion-icon",4),s.qZA(),s.qZA(),s.YNc(8,f,5,1,"ion-buttons",5),s.qZA(),s.YNc(9,M,10,6,"div",6),s.qZA(),s.TgZ(10,"ion-content"),s.TgZ(11,"div",7),s.TgZ(12,"ion-grid"),s.TgZ(13,"ion-row"),s.TgZ(14,"ion-col"),s.TgZ(15,"ion-list",8),s.YNc(16,_,20,8,"ion-item",9),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(7),s.Q6J("name",e.dropdown?"chevron-down":"chevron-up"),s.xp6(1),s.Q6J("ngIf",0!=e.numbers),s.xp6(1),s.Q6J("ngIf",e.dropdown),s.xp6(7),s.Q6J("ngForOf",e.productList))},directives:[i.Gu,i.sr,i.Sm,i.YG,c.Od,i.wd,i.gu,o.O5,i.W2,i.jY,i.Nd,i.wI,i.q_,o.sg,i.YI,c.rH,i.yp,i.Ie,i.Bs,i.Q$],styles:[".toolbar[_ngcontent-%COMP%]{height:84px;--background:#69a03a;color:#fff;font-size:20px;line-height:84px}.container[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{width:100px!important;height:100px!important}.container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.container[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{color:#ccc}.container[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;background-color:#69a03a}.container[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]:active{background-color:#051542}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]{margin-top:5px}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{font-weight:600;padding:5px;margin-right:20px;cursor:pointer}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{margin-left:20px;font-weight:600;padding:5px;cursor:pointer}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:active{background-color:#69a03a}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]:active{background-color:red}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;background-color:#69a03a}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]:active{background-color:#051542}.container[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:10px;color:#69a03a}.bg-transparent[_ngcontent-%COMP%]{background:#0000}ion-content[_ngcontent-%COMP%]{--background:url(backgroundimage.35be21de00795f69fb68.jpg) no-repeat center center/cover;background:linear-gradient(120deg,#2980b9,#8e44ad)}"]}),t})()}];let x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[c.Bz.forChild(k)],c.Bz]}),t})(),w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.ez,r.u5,i.Pc,x]]}),t})()}}]);