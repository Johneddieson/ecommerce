(self.webpackChunkcom_trackingsystem=self.webpackChunkcom_trackingsystem||[]).push([[3831],{3831:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Tab3PageModule:()=>b});var i=n(5214),s=n(6476),o=n(8583),r=n(665),a=n(4762),d=n(3018),l=n(7810),c=n(1562),u=n(1423);function h(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"ion-fab",12),d.NdJ("click",function(){return d.CHM(e),d.oxw().getCurrentLocation()}),d.TgZ(1,"ion-fab-button"),d._UZ(2,"ion-icon",13),d.qZA(),d.qZA()}}let g=(()=>{class e{constructor(e,t,n,i,s,o,r){this.actRoute=e,this.afstore=t,this.afauth=n,this.loadingCtrl=i,this.alertCtrl=s,this.router=o,this.msg=r,this.getCartDetails=[],this.isDisabled=!0,this.isEdit=!1,this.name=this.actRoute.snapshot.paramMap.get("name"),this.afauth.authState.subscribe(e=>{e&&e.uid&&(this.meReference=this.afstore.doc(`users/${e.uid}`),this.sub=this.meReference.valueChanges().subscribe(e=>{this.firstname=e.FirstName,this.lastname=e.LastName,this.address1=e.Address1,this.address2=e.Address2,this.phonenumber=`${e.PhoneNumber}`}))})}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){if("edit"==this.name)this.isEdit=!0;else{this.isEdit=!1;var e=yield this.alertCtrl.create({header:"Warning!",message:"Kindly strictly check your location if correct, Once your are done finalizing your location, after confirming your order, dont move to the location where you located until your order is delivered thanks!.",buttons:[{text:"Ok!",role:"cancel"}]});yield e.present()}})}getCurrentLocation(){return(0,a.mG)(this,void 0,void 0,function*(){var e=yield this.loadingCtrl.create({message:"Getting your location...",spinner:"bubbles"});yield e.present(),navigator.geolocation.getCurrentPosition(t=>{this.msg.myLoc(t.coords.latitude,t.coords.longitude).subscribe(t=>(0,a.mG)(this,void 0,void 0,function*(){var n=t.Response.View[0].Result[0].Location.Address,i=t.Response.View[0].Result[1].Location.Address;this.address1=`${n.Street} ${n.District} ${n.Label}`,this.address2=`${n.Street} ${i.District} ${i.Label}`,yield e.dismiss();var s=yield this.alertCtrl.create({message:"If your current location doesn't correct, you can edit it manually.",buttons:[{text:"Ok",role:"cancel"}]});yield s.present(),this.isDisabled=!1}))})})}Edit(){return(0,a.mG)(this,void 0,void 0,function*(){if("edit"==this.name){var e=JSON.parse(sessionStorage.getItem("cart")),t=yield this.loadingCtrl.create({message:"Editing Please Wait...",spinner:"bubbles"});yield t.present();var n=yield this.alertCtrl.create({message:"You edited your information successfully",buttons:[{text:"Ok",role:"cancel"}]});setTimeout(()=>(0,a.mG)(this,void 0,void 0,function*(){yield t.dismiss(),this.meReference.update({FirstName:this.firstname,LastName:this.lastname,Address1:this.address1,Address2:this.address2,PhoneNumber:this.phonenumber}).then(t=>(0,a.mG)(this,void 0,void 0,function*(){yield n.present(),e.length>0&&this.router.navigateByUrl("/checkout")}))}),2e3)}else if(""===this.address1){var i=yield this.alertCtrl.create({message:"Address should'nt be empty",buttons:[{text:"Ok",role:"cancel"}]});yield i.present()}else this.loadingCtrl.create({message:"Editing Please Wait..."}).then(e=>{e.present(),this.alertCtrl.create({message:"You edited your information successfully",buttons:[{text:"Ok",role:"cancel"}]}).then(t=>{setTimeout(()=>{e.dismiss(),t.present(),this.meReference.update({FirstName:this.firstname,LastName:this.lastname,Address1:this.address1,Address2:this.address2,PhoneNumber:this.phonenumber}),this.router.navigateByUrl("/checkout")},3e3)}).catch(e=>{})}).catch(e=>{})})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(s.gz),d.Y36(l.ST),d.Y36(c.zQ),d.Y36(i.HT),d.Y36(i.Br),d.Y36(s.F0),d.Y36(u.g))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-tab3"]],decls:27,vars:7,consts:[[1,"wrapper"],[2,"font-weight","bolder"],["lines","none"],["position","floating"],["type","text","placeholder","First Name",3,"ngModel","ngModelChange"],["type","text","placeholder","Last Name",3,"ngModel","ngModelChange"],["type","text","placeholder","Address 1",3,"disabled","ngModel","ngModelChange"],["lines","none","hidden",""],["type","text","placeholder","Address 2",3,"ngModel","ngModelChange"],["type","number","placeholder","Phone Number",3,"ngModel","ngModelChange"],[3,"click"],["vertical","bottom","horizontal","end","slot","fixed",3,"click",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed",3,"click"],["name","location-outline"]],template:function(e,t){1&e&&(d.TgZ(0,"ion-content"),d.TgZ(1,"div",0),d.TgZ(2,"h3",1),d._uU(3,"My Information"),d.qZA(),d.TgZ(4,"ion-item",2),d.TgZ(5,"ion-label",3),d._uU(6,"First Name"),d.qZA(),d.TgZ(7,"ion-input",4),d.NdJ("ngModelChange",function(e){return t.firstname=e}),d.qZA(),d.qZA(),d.TgZ(8,"ion-item",2),d.TgZ(9,"ion-label",3),d._uU(10,"Last Name"),d.qZA(),d.TgZ(11,"ion-input",5),d.NdJ("ngModelChange",function(e){return t.lastname=e}),d.qZA(),d.qZA(),d.TgZ(12,"ion-item",2),d.TgZ(13,"ion-label",3),d._uU(14,"Address"),d.qZA(),d.TgZ(15,"ion-input",6),d.NdJ("ngModelChange",function(e){return t.address1=e}),d.qZA(),d.qZA(),d.TgZ(16,"ion-item",7),d.TgZ(17,"ion-label",3),d._uU(18,"Address2"),d.qZA(),d.TgZ(19,"ion-input",8),d.NdJ("ngModelChange",function(e){return t.address2=e}),d.qZA(),d.qZA(),d.TgZ(20,"ion-item",2),d.TgZ(21,"ion-label",3),d._uU(22,"Phone Number"),d.qZA(),d.TgZ(23,"ion-input",9),d.NdJ("ngModelChange",function(e){return t.phonenumber=e}),d.qZA(),d.qZA(),d.TgZ(24,"ion-button",10),d.NdJ("click",function(){return t.Edit()}),d._uU(25,"Edit"),d.qZA(),d.qZA(),d.YNc(26,h,3,0,"ion-fab",11),d.qZA()),2&e&&(d.xp6(7),d.Q6J("ngModel",t.firstname),d.xp6(4),d.Q6J("ngModel",t.lastname),d.xp6(4),d.Q6J("disabled",t.isDisabled)("ngModel",t.address1),d.xp6(4),d.Q6J("ngModel",t.address2),d.xp6(4),d.Q6J("ngModel",t.phonenumber),d.xp6(3),d.Q6J("ngIf",!t.isEdit))},directives:[i.W2,i.Ie,i.Q$,i.pK,i.j9,r.JJ,r.On,i.as,i.YG,o.O5,i.IJ,i.W4,i.gu],styles:[".wrapper[_ngcontent-%COMP%]{width:90%;margin:10% auto}ion-item[_ngcontent-%COMP%]{margin:10% auto 3%;--background:#cac6c6;border-radius:10px}ion-footer[_ngcontent-%COMP%]{background:#fff;padding:20px;text-align:center;font-weight:600}#clickable[_ngcontent-%COMP%]{cursor:pointer}ion-content[_ngcontent-%COMP%]{--background:url(backgroundimage3.5f20fa4f128f1fd27053.jpg) no-repeat center center/cover;background:linear-gradient(120deg,#2980b9,#8e44ad)}"]}),e})();var m=n(581);const p=[{path:"",component:g}];let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[s.Bz.forChild(p)],s.Bz]}),e})(),b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[i.Pc,o.ez,r.u5,m.e,s.Bz.forChild([{path:"",component:g}]),f]]}),e})()}}]);