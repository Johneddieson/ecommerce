(self.webpackChunkcom_trackingsystem=self.webpackChunkcom_trackingsystem||[]).push([[1983],{1983:(t,n,o)=>{"use strict";o.r(n),o.d(n,{ViewproductsPageModule:()=>Z});var e=o(8583),i=o(665),r=o(5214),c=o(6476),a=o(3018),d=o(8002),u=o(6738),s=o(1841),g=o(7810),l=o(1562);const p=["productbtn"],h=function(){return{category:"Milktea"}},m=function(){return{category:"Fruit tea"}},f=function(){return{category:"Slushee"}};function P(t,n){if(1&t){const t=a.EpF();a.TgZ(0,"div",8,9),a.NdJ("mouseleave",function(){return a.CHM(t),a.oxw().dropdown=!1}),a.TgZ(2,"ion-item",10),a.NdJ("click",function(){return a.CHM(t),a.oxw().dropdown=!1}),a._uU(3," All "),a.qZA(),a.TgZ(4,"ion-item",11),a.NdJ("click",function(){return a.CHM(t),a.oxw().dropdown=!1}),a._uU(5," All "),a.qZA(),a.TgZ(6,"ion-item",10),a.NdJ("click",function(){return a.CHM(t),a.oxw().dropdown=!1}),a._uU(7," Milktea "),a.qZA(),a.TgZ(8,"ion-item",10),a.NdJ("click",function(){return a.CHM(t),a.oxw().dropdown=!1}),a._uU(9," Fruit Tea "),a.qZA(),a.TgZ(10,"ion-item",10),a.NdJ("click",function(){return a.CHM(t),a.oxw().dropdown=!1}),a._uU(11," Slushee "),a.qZA(),a.qZA()}2&t&&(a.xp6(2),a.Q6J("queryParams",a.DdM(4,h)),a.xp6(4),a.Q6J("queryParams",a.DdM(5,h)),a.xp6(2),a.Q6J("queryParams",a.DdM(6,m)),a.xp6(2),a.Q6J("queryParams",a.DdM(7,f)))}function C(t,n){if(1&t){const t=a.EpF();a.TgZ(0,"ion-item"),a.TgZ(1,"ion-thumbnail",1),a._UZ(2,"img",12),a.qZA(),a.TgZ(3,"ion-label"),a.TgZ(4,"h2"),a._uU(5),a.TgZ(6,"span",13),a._uU(7),a.ALo(8,"currency"),a.qZA(),a.qZA(),a._UZ(9,"h3"),a.TgZ(10,"p",14),a._uU(11),a.qZA(),a.TgZ(12,"div",15),a.TgZ(13,"span",16),a.TgZ(14,"button",17),a.NdJ("click",function(){const n=a.CHM(t).$implicit;return a.oxw().DeleteProduct(n)}),a._uU(15," Delete"),a.qZA(),a.qZA(),a.TgZ(16,"span",16),a.TgZ(17,"button",18),a.NdJ("click",function(){const n=a.CHM(t).$implicit;return a.oxw().EditProduct(n)}),a._uU(18," Edit"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=n.$implicit;a.xp6(2),a.s9C("src",t.ImageUrl,a.LSH),a.xp6(3),a.hij("",t.ProductName," "),a.xp6(2),a.hij(" ",a.xi3(8,4,t.UnitPrice,"\u20b1"),""),a.xp6(4),a.hij(" ",t.Stock," remaining stock")}}const M=[{path:"",component:(()=>{class t{constructor(t,n,o,e,i,r,c){this.http=t,this.loadingCtrl=n,this.alertCtrl=o,this.afstore=e,this.afauth=i,this.router=r,this.actRoute=c,this.products=[],this.dropdown=!1,this.afauth.authState.subscribe(t=>{t&&t.uid&&this.actRoute.queryParams.subscribe(t=>{this.productReference=null==t.category?this.afstore.collection("Products"):this.afstore.collection("Products",n=>n.where("Category","==",t.category)),this.sub=this.productReference.snapshotChanges().pipe((0,d.U)(t=>t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())))).subscribe(t=>{this.products=t})})})}ngOnInit(){}DeleteProduct(t){this.alertCtrl.create({message:"Are you sure you want to delete this product?",buttons:[{text:"Yes",handler:()=>{var n=u(new Date).format("DD-MM-YYYY hh:mm A");this.afstore.collection("Inventory").add({Quantity:-1*parseInt(t.Stock),Datetime:n,read:!1,Destination:"Admin",ProductName:t.ProductName,UnitPrice:t.UnitPrice,ImageUrl:t.ImageUrl}),this.afstore.doc(`Products/${t.id}`).delete()}},{text:"No",role:"cancel"}]}).then(t=>{t.present()})}EditProduct(t){this.router.navigateByUrl(`/editproduct/${t.id}`)}hideDropdown(t){const n=t.clientX,o=t.clientY,e=this.productbtn.nativeElement.getBoundingClientRect();(n<e.left+2||n>e.right-2||o<e.top+2)&&(this.dropdown=!1)}}return t.\u0275fac=function(n){return new(n||t)(a.Y36(s.eN),a.Y36(r.HT),a.Y36(r.Br),a.Y36(g.ST),a.Y36(l.zQ),a.Y36(c.F0),a.Y36(c.gz))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-viewproducts"]],viewQuery:function(t,n){if(1&t&&a.Gf(p,5,a.SBq),2&t){let t;a.iGM(t=a.CRH())&&(n.productbtn=t.first)}},inputs:{title:"title"},decls:15,vars:3,consts:[[1,"toolbar"],["slot","start"],["fill","clear","color","dark","routerDirection","root","routerLinkActive","active-item",1,"dropdown-btn",3,"mouseenter","mouseleave"],["productbtn",""],["slot","end",3,"name"],["class","dropdown",3,"mouseleave",4,"ngIf"],[1,"container"],[4,"ngFor","ngForOf"],[1,"dropdown",3,"mouseleave"],["dropdownbox",""],["button","","routerLink","/viewproducts","lines","none","routerDirection","root",3,"queryParams","click"],["button","","routerLink","/viewproducts","lines","none","routerDirection","root",3,"click"],[3,"src"],[2,"float","right","color","#69a03a"],[1,"rate"],["id","qty"],[2,"float","right"],["id","btn2",3,"click"],["id","btn",3,"click"]],template:function(t,n){1&t&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar",0),a.TgZ(2,"ion-buttons",1),a.TgZ(3,"ion-button",2,3),a.NdJ("mouseenter",function(){return n.dropdown=!0})("mouseleave",function(t){return n.hideDropdown(t)}),a._uU(5," Categories "),a._UZ(6,"ion-icon",4),a.qZA(),a.qZA(),a.qZA(),a.YNc(7,P,12,8,"div",5),a.qZA(),a.TgZ(8,"ion-content"),a.TgZ(9,"div",6),a.TgZ(10,"ion-grid"),a.TgZ(11,"ion-row"),a.TgZ(12,"ion-col"),a.TgZ(13,"ion-list"),a.YNc(14,C,19,7,"ion-item",7),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(6),a.Q6J("name",n.dropdown?"chevron-down":"chevron-up"),a.xp6(1),a.Q6J("ngIf",n.dropdown),a.xp6(7),a.Q6J("ngForOf",n.products))},directives:[r.Gu,r.sr,r.Sm,r.YG,c.Od,r.gu,e.O5,r.W2,r.jY,r.Nd,r.wI,r.q_,e.sg,r.Ie,r.YI,c.rH,r.Bs,r.Q$],pipes:[e.H9],styles:[".toolbar[_ngcontent-%COMP%]{height:84px;--background:#69a03a;color:#fff;font-size:20px;line-height:84px}.container[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{width:100px!important;height:100px!important}.container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.container[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{color:#ccc}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]{margin-top:5px}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{font-weight:600;padding:5px;margin-right:20px;cursor:pointer}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{margin-left:20px;font-weight:600;padding:5px;cursor:pointer}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:active{background-color:#69a03a}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]:active{background-color:red}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;background-color:#69a03a}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]:active{background-color:#051542}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn2[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;background-color:#c31111}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn2[_ngcontent-%COMP%]:active{background-color:#990404}.container[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:10px;color:#69a03a}@media (min-width: 768px){.mobile-header[_ngcontent-%COMP%]{display:none}.header[_ngcontent-%COMP%]{display:flex;background:#92949c;padding-left:40px;padding-right:40px}}@media (max-width: 768px){.mobile-header[_ngcontent-%COMP%]{display:block}.header[_ngcontent-%COMP%]{display:none}}.active-item[_ngcontent-%COMP%]{border-bottom:2px solid var(--ion-color-dark)}.dropdown[_ngcontent-%COMP%]{width:136px;height:150px;background:#fff;position:absolute;top:40px;left:87px;z-index:1}.dropdown[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:hover{--ion-item-color:var(--ion-color-primary)}"]}),t})()}];let _=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[c.Bz.forChild(M)],c.Bz]}),t})(),Z=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[e.ez,i.u5,r.Pc,_]]}),t})()}}]);