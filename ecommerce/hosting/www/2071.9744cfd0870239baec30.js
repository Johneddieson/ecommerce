(self.webpackChunkcom_trackingsystem=self.webpackChunkcom_trackingsystem||[]).push([[2071],{2071:(t,e,n)=>{"use strict";n.r(e),n.d(e,{CheckoutPageModule:()=>C});var i=n(8583),o=n(665),r=n(5214),a=n(6476),s=n(4762),c=n(6738),l=n(3018),g=n(1562),h=n(7810),m=n(1423);function d(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"ion-item",13),l.TgZ(1,"ion-thumbnail",1),l._UZ(2,"img",14),l.qZA(),l.TgZ(3,"ion-label"),l.TgZ(4,"h2",10),l._uU(5),l.TgZ(6,"span",15),l._uU(7),l.ALo(8,"currency"),l.qZA(),l.qZA(),l._UZ(9,"h3"),l.TgZ(10,"p",10),l._uU(11),l.qZA(),l.TgZ(12,"div",16),l.TgZ(13,"span",10),l._uU(14),l.qZA(),l._UZ(15,"span",17),l.TgZ(16,"span",18),l.TgZ(17,"button",19),l.NdJ("click",function(){const e=l.CHM(t).$implicit;return l.oxw().singleDelete(e)}),l._uU(18," Remove"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=e.$implicit;l.xp6(2),l.s9C("src",t.ImageUrl,l.LSH),l.xp6(3),l.hij("",t.ProductName," "),l.xp6(2),l.Oqu(l.xi3(8,5,t.UnitPrice,"\u20b1")),l.xp6(4),l.hij(" ",t.Stock," remaining stock"),l.xp6(3),l.hij(" ",t.Quantity," ")}}function u(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"ion-button",4),l.NdJ("click",function(){return l.CHM(t),l.oxw().OrderNow()}),l._uU(1,"Confirm Order"),l.qZA()}}const p=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o,r,a,s){this.applicationRef=t,this.zone=e,this.alertCtrl=n,this.locationStrategy=i,this.router=o,this.afauth=r,this.afstore=a,this.msg=s,this.getCartDetails=[],this.total=0,this.cartItem=0,this.getOrders=[],this.myInformation={},this.paymentMethod="",this.afauth.authState.subscribe(t=>{t&&t.uid&&(this.meReference=a.doc(`users/${t.uid}`),this.sub=this.meReference.valueChanges().subscribe(t=>{this.myInformation=t}))})}ngOnInit(){this.msg.cartSubject.next(this.CartDetails()),this.msg.cartSubject.next(this.loadCart())}CartDetails(){sessionStorage.getItem("cart")&&(this.getCartDetails=JSON.parse(sessionStorage.getItem("cart")))}inc(t,e){for(let n=0;n<this.getCartDetails.length;n++)this.getCartDetails[n].id===t&&(this.getCartDetails[n].Quantity=e+1);sessionStorage.setItem("cart",JSON.stringify(this.getCartDetails)),this.loadCart()}dec(t,e){for(let n=0;n<this.getCartDetails.length;n++)this.getCartDetails[n].id===t&&1!=e&&(this.getCartDetails[n].Quantity=e-1);sessionStorage.setItem("cart",JSON.stringify(this.getCartDetails)),this.loadCart()}loadCart(){sessionStorage.getItem("cart")&&(this.getCartDetails=JSON.parse(sessionStorage.getItem("cart")),this.total=this.getCartDetails.reduce((t,e)=>t+e.UnitPrice*e.Quantity,0))}removeall(){sessionStorage.removeItem("cart"),this.getCartDetails=[],this.total=0,this.cartItem=0,this.msg.cartSubject.next(this.cartItem),this.loadCart()}singleDelete(t){if(sessionStorage.getItem("cart")){this.getCartDetails=JSON.parse(sessionStorage.getItem("cart"));for(let e=0;e<this.getCartDetails.length;e++)this.getCartDetails[e].id===t.id&&(this.getCartDetails.splice(e,1),sessionStorage.setItem("cart",JSON.stringify(this.getCartDetails)),this.loadCart(),this.cartItemFunc())}}cartItemFunc(){var t=JSON.parse(sessionStorage.getItem("cart"));this.cartItem=t.length,this.msg.cartSubject.next(this.cartItem)}gotohome(){this.router.navigate(["tabs"])}OrderNow(){return(0,s.mG)(this,void 0,void 0,function*(){this.alertCtrl.create({message:"Are you sure you want to finalize your order?",buttons:[{text:"Ok",handler:()=>{this.alertCtrl.create({message:"Ordered Successfully!",buttons:[{text:"Ok",role:"cancel"}]}).then(t=>(0,s.mG)(this,void 0,void 0,function*(){if(this.myInformation.FirstName&&this.myInformation.LastName&&this.myInformation.Address1&&this.myInformation.PhoneNumber)if(""==this.paymentMethod){var e=yield this.alertCtrl.create({message:"Payment Method is required",buttons:[{text:"Ok",role:"cancel"}]});yield e.present()}else{t.present();var n=c(new Date).format("MM-DD-YYYY hh:mm A");this.afstore.collection("Orders").add({OrderDetails:this.getCartDetails,BillingFirstname:this.myInformation.FirstName,BillingLastname:this.myInformation.LastName,BillingAddress1:this.myInformation.Address1,BillingAddress2:this.myInformation.Address2,BillingPhonenumber:this.myInformation.PhoneNumber,Billingemail:this.myInformation.Email,BillingIndexId:this.myInformation.Uid,Status:"Open",Datetime:n,TotalAmount:parseFloat(this.total.toString()).toFixed(2),DatetimeToSort:new Date,Discount:"None",PaymentMethod:this.paymentMethod}).then(t=>{}).catch(t=>{alert(t)}),this.removeall(),this.paymentMethod="",this.meReference.update({Address1:"",Address2:""})}else this.alertCtrl.create({message:"Please fill up about your details first.",buttons:[{text:"Ok",handler:()=>{this.router.navigateByUrl("/tabs/tab3/edit")}}]}).then(t=>{t.present()})}))}},{text:"Cancel",role:"cancel"}]}).then(t=>{t.present()})})}selectPaymentMethod(){return(0,s.mG)(this,void 0,void 0,function*(){var t=yield this.alertCtrl.create({header:"Select Payment Method",inputs:[{type:"radio",name:"G-Cash",value:"G-Cash",label:"G-Cash"},{type:"radio",name:"Cash",value:"Cash",label:"Cash"}],buttons:[{text:"Select",handler:t=>{this.paymentMethod="",this.paymentMethod=t}},{text:"Close",role:"cancel"}]});yield t.present()})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(l.z2F),l.Y36(l.R0b),l.Y36(r.Br),l.Y36(i.S$),l.Y36(a.F0),l.Y36(g.zQ),l.Y36(h.ST),l.Y36(m.g))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-checkout"]],decls:27,vars:7,consts:[[1,"toolbar"],["slot","start"],["name","arrow-back-outline","slot","icon-only","routerLink","/tabs/tab1",2,"cursor","pointer"],["slot","end"],["color","light",3,"click"],[1,"paymentMethod"],[1,"container"],[1,"bg-transparent"],["color","none","lines","none",4,"ngFor","ngForOf"],["size","7"],[2,"font-weight","bolder"],["size","5"],["color","light",3,"click",4,"ngIf"],["color","none","lines","none"],[3,"src"],[2,"float","right","font-weight","bolder"],["id","qty"],[1,"plus"],[2,"float","right"],["id","btn",3,"click"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-icon",2),l.qZA(),l.TgZ(4,"ion-buttons",3),l.TgZ(5,"ion-button",4),l.NdJ("click",function(){return e.selectPaymentMethod()}),l._UZ(6,"img",5),l.qZA(),l.qZA(),l.TgZ(7,"ion-title"),l._uU(8,"Check Out"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"ion-content"),l.TgZ(10,"div",6),l.TgZ(11,"ion-grid"),l.TgZ(12,"ion-row"),l.TgZ(13,"ion-col"),l.TgZ(14,"ion-list",7),l.YNc(15,d,19,8,"ion-item",8),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(16,"ion-footer"),l.TgZ(17,"ion-row"),l.TgZ(18,"ion-col",9),l.TgZ(19,"ion-text",10),l.TgZ(20,"h4"),l._uU(21),l.ALo(22,"currency"),l.qZA(),l.TgZ(23,"h4"),l._uU(24),l.qZA(),l.qZA(),l.qZA(),l.TgZ(25,"ion-col",11),l.YNc(26,u,2,0,"ion-button",12),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(15),l.Q6J("ngForOf",e.getCartDetails),l.xp6(6),l.hij("Total : ",l.xi3(22,4,e.total,"\u20b1")," "),l.xp6(3),l.hij("Payment Method : ",e.paymentMethod," "),l.xp6(2),l.Q6J("ngIf",e.total>0))},directives:[r.Gu,r.sr,r.Sm,r.gu,r.YI,a.rH,r.YG,r.wd,r.W2,r.jY,r.Nd,r.wI,r.q_,i.sg,r.fr,r.yW,i.O5,r.Ie,r.Bs,r.Q$],pipes:[i.H9],styles:[".paymentMethod[_ngcontent-%COMP%]{content:url(https://cdn-icons-png.flaticon.com/512/671/671517.png);width:1.5rem}.toolbar[_ngcontent-%COMP%]{height:84px;--background:#69a03a;color:#fff;font-size:20px;line-height:84px}.buttonsactive[_ngcontent-%COMP%]:active{background-color:red;font-weight:500}.container[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{width:100px!important;height:100px!important}.container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.container[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{color:#ccc}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]{margin-top:5px}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{font-weight:600;padding:5px;margin-right:20px;cursor:pointer}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{margin-left:20px;font-weight:600;padding:5px;cursor:pointer}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;background-color:red}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]:active{background-color:#051542}.container[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:10px;font-weight:bolder}ion-footer[_ngcontent-%COMP%]{--background:#69a03a}ion-footer[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{background:#69a03a;color:#fff}ion-footer[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:last-child{text-align:end}ion-back-button[_ngcontent-%COMP%]{display:block}.bg-transparent[_ngcontent-%COMP%]{background:#0000}ion-content[_ngcontent-%COMP%]{--background:url(backgroundimage3.5f20fa4f128f1fd27053.jpg) no-repeat center center/cover;background:linear-gradient(120deg,#2980b9,#8e44ad)}"]}),t})()}];let f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[a.Bz.forChild(p)],a.Bz]}),t})(),C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[i.ez,o.u5,r.Pc,f]]}),t})()}}]);